<!DOCTYPE html>
<html>
<head>
	<title>TODOS</title>
</head>
<body>
<div id="app">
	<todolist-view></todolist-view>	
	<router-link to="/create">Create TODOList</router-link>
	<router-view>
	<!-- route outlet -->
	<!-- component matched by the route will render here -->
	</router-view>
</div>
</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>


<script type="text/javascript">
	
	// 0. If using a module system (e.g. via vue-cli), import Vue and VueRouter
// and then call `Vue.use(VueRouter)`.

// 1. Define route components.
// These can be imported from other files

var todolistComponent = Vue.component('todolist-view', {
	data: function() {
		return {
			todolistdata: null
		}
	},
	mounted() {
		axios
			.get('api/get_todolist')
			.then(response => (this.todolistdata = response.data))
	},
  	template: '<div><h1>TODO App!</h1><ol><li v-for="todolist in todolistdata">{{ todolist.Title }}<ol><li v-for="todo in todolist.Todos">{{ todo.Name }}<input type="checkbox" v-bind:checked="todo.Done" v-bind:name="todo.ID"></li></ol></li></ol></div>'
})

var createTodoListComponent = Vue.component('createtodolist-view', {
	methods: {
		createTodoList: function() {
			axios.post('api/create', {
				title: this.$refs.title.value
			}).then(function (response) {
				console.log(response);
			}).catch(function (error) {
				console.log(error);
			});
		}
	},
  	template: '<form @submit.prevent><label>Title:</label><input type="text" name="title" ref="title"><br /><br /><button v-on:click="createTodoList()">Submit</button></form>'
})

// 2. Define some routes
// Each route should map to a component. The "component" can
// either be an actual component constructor created via
// `Vue.extend()`, or just a component options object.
// We'll talk about nested routes later.
const routes = [
	{ path: '/', todolistComponent },
	{ path: '/create', component: createTodoListComponent },
]

// 3. Create the router instance and pass the `routes` option
// You can pass in additional options here, but let's
// keep it simple for now.
const router = new VueRouter({
	routes, // short for `routes: routes`
	mode: 'history'
})

// 4. Create and mount the root instance.
// Make sure to inject the router with the router option to make the
// whole app router-aware.
const app = new Vue({
	router,
	el: '#app'
}).$mount('#app')

// Now the app has started!
	
</script>

</html>